<!doctype html><html lang="fr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Démo — Application Vue.js</title><style>html,body{height:100%;margin:0;background:#000;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial}.player{position:fixed;inset:0;display:flex;align-items:center;justify-content:center}video{max-width:100%;max-height:100%;width:100%;height:100%;background:#000}.controls{position:fixed;left:1rem;top:1rem;z-index:3}.back{background:rgba(255,255,255,0.06);color:#fff;padding:.5rem .75rem;border-radius:6px;text-decoration:none}.center-play{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:2}.center-play button{background:rgba(255,255,255,0.12);border:0;color:#fff;padding:1rem 1.2rem;border-radius:8px;font-size:1.1rem;cursor:pointer}</style></head><body><a class="back" href="/">← Retour</a><div class="player" id="player"><div class="center-play" id="centerPlay"><button id="startBtn">Lire la démonstration</button></div><video id="demoVideo" preload="metadata" controls>Votre navigateur ne supporte pas la vidéo.</video></div><script>const video=document.getElementById('demoVideo'),startBtn=document.getElementById('startBtn'),center=document.getElementById('centerPlay');function getProjectId(){const params=new URLSearchParams(window.location.search);return params.get('project')}async function loadProjectVideo(){const id=getProjectId();let src='assets/media/demo-reel.mp4';try{const res=await fetch('data/projects.json',{cache:'no-store'});if(res.ok){const projects=await res.json();if(Array.isArray(projects)){const proj=projects.find(p=>p.id===id);if(proj&&proj.video)src=proj.video;if(proj&&proj.title)document.title='Démo — '+proj.title}}}catch(e){console.warn('Impossible de charger projects.json',e)}const srcEl=document.createElement('source');srcEl.src=src;srcEl.type='video/mp4';while(video.firstChild)video.removeChild(video.firstChild);video.appendChild(srcEl);try{video.setAttribute('preload','auto')}catch(e){}try{video.load()}catch(e){}try{fetch(src,{method:'HEAD',cache:'no-store'}).then(r=>{console.log('HEAD',src,r.status,r.headers.get('content-length'));const info=document.getElementById('video-src');if(info)info.textContent=info.textContent+' | HEAD status: '+r.status}).catch(e=>console.warn('HEAD fetch failed',e))}catch(e){console.warn('head fetch error',e)}try{let info=document.getElementById('video-src');if(!info){info=document.createElement('div');info.id='video-src';info.style.position='fixed';info.style.left='1rem';info.style.bottom='1rem';info.style.padding='6px 10px';info.style.background='rgba(255,255,255,0.06)';info.style.color='#fff';info.style.borderRadius='6px';document.body.appendChild(info)}info.textContent='Source vidéo sélectionnée: '+src}catch(e){console.log('debug element error',e)}console.log('video source set to',src)}startBtn.addEventListener('click',async function(){try{center.style.display='none';await video.play();if(video.requestFullscreen)await video.requestFullscreen();else if(video.webkitEnterFullscreen)video.webkitEnterFullscreen()}catch(e){console.warn('Play failed',e)}});window.addEventListener('load',function(){loadProjectVideo().then(()=>{video.muted=true;video.play().then(()=>{video.pause();video.currentTime=0}).catch(()=>{})})});</script></body></html>